/*
 keychar.js (c) 2011 ofk
 Released under the MIT License.
*/
(function(){function e(c){var b=String.fromCharCode,h=!!c.originalTarget,j=c.type===r,i=c.type===s,a=c.keyCode,e=!k&&!c.which,d=c.charCode||(i&&32<=a&&a<=126?a:0);d===a&&e&&(d=0);k&&i&&c.ctrlKey&&(a===10?a=13:d=a+64);if(b=112<=a&&a<=123&&(!i||e)?t+(a-111):d?b(d):65<=a&&a<=90?b(a+32):188<=a&&a<=191?b(a-144):186<=a&&a<=192||219<=a&&a<=222?b(a-128):48<=a&&a<=57?b(a):96<=a&&a<=105?b(a-48):a===107&&h?";":106<=a&&a<=111?b(a-64):a===240&&j?f:a===240&&i&&h?f:32<=a&&a<=40?u[a-32]:g[l](a)?g[a]:null)b===" "&&
(b=v),j=c.shiftKey&&b!==m,h=c.ctrlKey&&b!==n,c=c.altKey&&b!==o,!d&&j&&(b==="\\"?b=a===220?"|":w:p[l](b)?b=p[b]:(a=b.toUpperCase(),b=b===a?"S-"+b:a)),c&&(b="A-"+b),h&&(b="C-"+b);return b}var w="_",o="alt",f="caps",n="ctrl",t="f",l="hasOwnProperty",r="keydown",s="keypress",m="shift",v="space",k=!!document.uniqueID,q=!!this.opera,g={3:"brk",8:"bs",9:"tab",13:"enter",16:m,17:n,18:o,19:"pus",20:f,27:"esc",28:"conv",29:"noconv",44:"psc",45:"ins",46:"del",91:"win",59:q?"colon":":",93:"context",144:"numlk",
145:"scrlk",194:"\\",197:"ime",208:f,226:"\\",229:"ime",240:"kana",242:f,243:"zen",244:"han",57351:"context"},u=" ,pgup,pgdn,end,home,left,up,right,down".split(","),p={1:"!",2:'"',3:"#",4:"$",5:"%",6:"&",7:"'",8:"(",9:")",",":"<",".":">","/":"?",";":"+",":":"*","@":"`","-":"=","^":"~","[":"{","]":"}"};q&&(g[42]="*",g[43]="+",g[47]="/");this.getKeyChar=e;if(this.jQuery)jQuery.Event.prototype.keyChar=function(){return e(this.originalEvent)}})();